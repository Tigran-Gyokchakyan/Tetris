!function(t){function e(e){for(var s,a,r=e[0],h=e[1],l=e[2],u=0,d=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);for(c&&c(e);d.length;)d.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,r=1;r<i.length;r++){var h=i[r];0!==n[h]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},n={0:0},o=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=h;o.push([1467,1]),i()}({1467:function(t,e,i){"use strict";i.r(e);var s=i(9);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(u,t);var e,i,s,n,c=(e=u,function(){var t,i=l(e);if(h()){var s=l(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return r(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,{key:"BootScene"})}return i=u,(s=[{key:"preload",value:function(){var t=this;this.fontDiv=document.createElement("div"),document.body.appendChild(this.fontDiv),["Assistant","AssistantSemiBold","AssistantBold"].forEach((function(e){var i=document.createElement("div");i.id=e,i.style.fontFamily=e,i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.opacity=.03,i.innerHTML="|MÃ‰qgy",t.fontDiv.appendChild(i)})),this.load.multiatlas("atlas","assets/tetris-atlas.json","assets"),this.load.json("questionsData","assets/data/questions.json"),this.load.atlas("atlasNew","assets/tetris-atlas-new.png","assets/tetris-atlas-new.json"),this.load.atlas("correctFlagAtlas","assets/animations/correct_flag.png","assets/animations/correct_flag.json"),this.load.atlas("correctLampAtlas","assets/animations/correct_lamp.png","assets/animations/correct_lamp.json"),this.load.atlas("correctLikeAtlas","assets/animations/correct_like.png","assets/animations/correct_like.json"),this.load.atlas("correctSmileAtlas","assets/animations/correct_smile.png","assets/animations/correct_smile.json"),this.load.atlas("correctStarAtlas","assets/animations/correct_star.png","assets/animations/correct_star.json"),this.load.atlas("correctTurbineAtlas","assets/animations/correct_turbine.png","assets/animations/correct_turbine.json"),this.load.atlas("finishAtlas","assets/animations/finish.png","assets/animations/finish.json"),this.load.atlas("nextLevelAtlas","assets/animations/next_level.png","assets/animations/next_level.json"),this.load.atlas("wrongAtlas","assets/animations/wrong.png","assets/animations/wrong.json"),this.load.audio("backgroundMusic","assets/audio/040_main_loop.wav"),this.load.audio("correctBrick","assets/audio/right_answer.wav"),this.load.audio("wrongBrick","assets/audio/wrong_answer.wav"),this.load.audio("gameFinish","assets/audio/finish_sound.mp3"),this.load.audio("nextLevel","assets/audio/next_level.wav")}},{key:"update",value:function(){this.sound.add("backgroundMusic",{loop:!0}).play(),document.body.removeChild(this.fontDiv),this.scene.stop(),this.scene.start("GameScene")}}])&&o(i.prototype,s),n&&o(i,n),u}(s.Scene),u=1920,d=1080,f="https://greenwin.kkl.org.il/tetris/Zionism",y="https://greenwin.kkl.org.il/contact/join-us/​";function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,i,s,n,o=(e=a,function(){var t,i=S(e);if(x()){var s=S(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return b(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,{key:t})}return i=a,(s=[{key:"create",value:function(){this.scale.on("resize",this.onResize,this)}},{key:"layout",value:function(){var t=this.game.scale.isLandscape?this.gameWidth:this.gameHeight;this.scaleXRatio=t/u;var e=this.gameWidth/u,i=this.gameHeight/d,s=Math.max(e,i);this.scaleRatio=s,this.gameScale=devicePixelRatio*s}},{key:"cleanUp",value:function(){this.scale.off("resize",this.onResize,this)}},{key:"onResize",value:function(){this.layout()}},{key:"isMobile",get:function(){return!0===this.sys.game.device.os.android||!0===this.sys.game.device.os.iOS}},{key:"gameWidth",get:function(){return this.game.scale.gameSize.width}},{key:"gameHeight",get:function(){return this.game.scale.gameSize.height}},{key:"isDeviceLandscape",get:function(){return this.game.scale.isLandscape}}])&&g(i.prototype,s),n&&g(i,n),a}(s.Scene);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(n,t);var e,i=(e=n,function(){var t,i=L(e);if(T()){var s=L(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return B(this,t)});function n(t,e,o){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return v(this,n),(a=i.call(this,t)).overState=new s.GameObjects.Image(a.scene,0,0,"atlas",o),a.add(a.overState),a.overState.visible=!1,a.upState=new s.GameObjects.Image(a.scene,0,0,"atlas",e),a.add(a.upState),a.setSize(a.upState.width,a.upState.height),a.setInteractive(),void 0!==r&&(a.label=new s.GameObjects.Text(a.scene,0,0,r,h),a.add(a.label),a.label.setScale(.5),a.label.x=.5*-a.label.displayWidth,a.label.y=.5*-a.label.displayHeight),a}return n}(s.GameObjects.Container),R={roundScore:0,totalScore:0,round:0,isGameFinished:!1,isMute:!1,isGamePaused:!1},O="כל הכבוד, השלמתם את המשחק בהצלחה!",H="ומה עכשיו? אתם מוזמנים לשחק שוב, ואולי לקבל ניקוד גבוה יותר ומונחים חדשים.",j='אתם גם יכולים לשחק במשחקים נוספים באתר "חלון ירוק לצעירים" ולהירשם לדיוור שלנו.',P="לא השלמתם את הטטריס? לא נורא...",A='שחקו שוב או גלשו באתר "חלון ירוק לצעירים" ותיהנו ממשחקים ותכנים נוספים.',G="רצוי גם להירשם לדיוור שלנו ולקבל עדכונים על משחקים חדשים ופעילויות.",D="מושג למושג | משחק טטריס ציונות",F="במשחק טטריס ציונות עליכם לכוון את קוביות המונחים שצונחות מטה לבלוק המתאים, להשלים ארבעה סבבים ולצבור את מרב הנקודות.",M="הניקוד במשחק הטטריס מצטבר בין הסבבים.",z="רוצים לשפר אותו? אין בעיה, שחקו שוב, רק שימו לב שהמושגים עשויים להשתנות.",C="תיהנו!";function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function U(t,e,i){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(a,t);var e,i,s,n,o=(e=a,function(){var t,i=X(e);if(I()){var s=X(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return q(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,"IntroScene")}return i=a,(s=[{key:"create",value:function(){var t=this;U(X(a.prototype),"create",this).call(this),this.background=this.add.image(0,0,"atlas","bg.png"),this.platform=this.add.image(0,0,"atlas","platform_opening.png"),this.platform.setOrigin(0,0),this.add.existing(this.platform),this.gameLogo=this.add.image(0,0,"atlas","game logo.png"),this.hebrewText=this.add.image(0,0,"atlas","hebrew_text.png"),this.kklLogo=this.add.image(0,0,"atlas","kkl logo.png"),this.tetrisSymbol=this.add.image(0,0,"atlas","tetris symbol.png"),this.titleText=this.add.text(),this.titleText.setScale(.5),this.bodyText=this.add.text(),this.bodyText.setScale(.5),this.bodyText.lineSpacing=16,this.bottomText=this.add.text(),this.bottomText.setScale(.5);var e={fontFamily:"AssistantSemiBold",fontSize:"60px",fill:"#ffffff",align:"center",fixedWidth:280,wordWrap:{width:280}};this.playButton=new W(this,"Vector Smart Object.png","Vector Smart Object.png","למשחק",e),this.add.existing(this.playButton),this.playButton.label.y=.42*-this.playButton.displayHeight,this.playButton.on("pointerup",(function(){t.cleanUp(),t.scene.stop(),t.scene.start("GameScene")})),this.layout()}},{key:"layout",value:function(){U(X(a.prototype),"layout",this).call(this),this.background.setScale(this.scaleRatio),this.background.x=this.cameras.main.centerX;var t=.5*(this.game.scale.gameSize.height-this.background.displayHeight);this.background.y=this.cameras.main.centerY+Math.abs(t),this.isMobile?this.isDeviceLandscape?this.layoutMobileLandscape():this.layoutMobilePortrait():this.layoutDestop()}},{key:"layoutDestop",value:function(){this.platform.displayHeight=this.platform.height*this.scaleRatio,this.platform.displayWidth=this.platform.width*this.scaleRatio,this.platform.y=0,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth);var t=180*this.scaleRatio,e=40*this.scaleRatio,i=25*this.scaleRatio;this.gameLogo.setScale(this.scaleRatio),this.gameLogo.x=this.cameras.main.centerX+.45*this.gameLogo.displayWidth,this.gameLogo.y=this.platform.y+.5*t,this.hebrewText.setScale(this.scaleRatio),this.hebrewText.x=this.cameras.main.centerX-.65*this.hebrewText.displayWidth,this.hebrewText.y=this.gameLogo.y,this.kklLogo.setScale(this.scaleRatio),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-e,this.kklLogo.y=this.platform.y+.5*t,this.tetrisSymbol.setScale(this.scaleRatio),this.tetrisSymbol.x=this.platform.x+.5*this.tetrisSymbol.displayWidth+e,this.tetrisSymbol.y=this.platform.y+this.platform.displayHeight-.5*this.tetrisSymbol.displayHeight-i;var s=this.platform.displayWidth-2*e,n=12*this.scaleRatio,o=D;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(68*this.scaleRatio),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*s,fixedHeight:0,wordWrap:{width:2*s}}),this.titleText.initRTL(),this.titleText.setText(o),this.titleText.x=this.platform.x+this.platform.displayWidth-e,this.titleText.y=this.platform.y+t+i;var a=F+"\n"+M+"\n"+z+"\n";this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(48*this.scaleRatio),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*s,fixedHeight:0,wordWrap:{width:2*s}}),this.bodyText.initRTL(),this.bodyText.setText(a),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+n,this.bottomText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(52*this.scaleRatio),"px"),fill:"#198EC4",rtl:!0,fixedWidth:2*s,fixedHeight:0,wordWrap:{width:2*s}}),this.bottomText.initRTL(),this.bottomText.setText(C),this.bottomText.x=this.bodyText.x,this.bottomText.y=this.bodyText.y+this.bodyText.displayHeight-2*n,this.playButton.setScale(this.scaleRatio),this.playButton.x=this.platform.x+this.platform.displayWidth-this.playButton.displayWidth-e,this.playButton.y=this.platform.displayHeight+this.platform.y-this.playButton.displayHeight}},{key:"layoutMobileLandscape",value:function(){var t=this.gameHeight/this.platform.height;this.platform.displayWidth=this.platform.width*t,this.platform.displayHeight=this.platform.height*t*1.25,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth),this.platform.y=.4*(this.gameHeight-this.platform.displayHeight);var e=180*t*1.25+this.platform.y,i=40*t,s=25*t;this.gameLogo.setScale(t),this.gameLogo.x=this.cameras.main.centerX+.45*this.gameLogo.displayWidth,this.gameLogo.y=.5*e,this.hebrewText.setScale(t),this.hebrewText.x=this.cameras.main.centerX-.65*this.hebrewText.displayWidth,this.hebrewText.y=this.gameLogo.y,this.kklLogo.setScale(.8*t),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-i,this.kklLogo.y=.5*e,this.tetrisSymbol.setScale(.8*t),this.tetrisSymbol.x=this.platform.x+.5*this.tetrisSymbol.displayWidth+i,this.tetrisSymbol.y=this.gameHeight-.5*this.tetrisSymbol.displayHeight-s;var n=this.platform.displayWidth-2*i,o=12*t;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(68*t),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.titleText.initRTL(),this.titleText.setText(D),this.titleText.x=this.platform.x+this.platform.displayWidth-i,this.titleText.y=e+s;var a=F+"\n"+M+"\n"+z+"\n";this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(48*t),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bodyText.initRTL(),this.bodyText.setText(a),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+o,this.bottomText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(52*t),"px"),fill:"#198EC4",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bottomText.initRTL(),this.bottomText.setText(C),this.bottomText.x=this.bodyText.x,this.bottomText.y=this.bodyText.y+this.bodyText.displayHeight-2*o,this.playButton.setScale(t),this.playButton.x=this.platform.x+this.platform.displayWidth-this.playButton.displayWidth-i,this.playButton.y=this.gameHeight-this.playButton.displayHeight}},{key:"layoutMobilePortrait",value:function(){var t=this.scaleRatio;this.platform.displayWidth=.9*this.gameWidth,this.platform.displayHeight=1.25*this.gameHeight,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth),this.platform.y=.75*(this.gameHeight-this.platform.displayHeight);var e=180*t*.75,i=18*t,s=18*t;this.hebrewText.setScale(.6*t),this.hebrewText.x=this.platform.x+.5*this.hebrewText.displayWidth+i,this.hebrewText.y=.5*e,this.kklLogo.setScale(.7*t),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-i,this.kklLogo.y=.5*e,this.gameLogo.setScale(.6*t),this.gameLogo.x=.5*(this.kklLogo.x-this.hebrewText.x)+this.hebrewText.x+i,this.gameLogo.y=.5*e,this.tetrisSymbol.setScale(.8*t),this.tetrisSymbol.x=this.cameras.main.centerX,this.tetrisSymbol.y=this.gameHeight-.5*this.tetrisSymbol.displayHeight-s;var n=this.platform.displayWidth-2*i,o=12*t;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(72*t),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.titleText.initRTL(),this.titleText.setText(D),this.titleText.x=this.platform.x+this.platform.displayWidth-i,this.titleText.y=e+1.5*s;var a=F+"\n"+M+"\n"+z+"\n";this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(48*t),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bodyText.initRTL(),this.bodyText.setText(a),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+o,this.bottomText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(52*t),"px"),fill:"#198EC4",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bottomText.initRTL(),this.bottomText.setText(C),this.bottomText.x=this.bodyText.x,this.bottomText.y=this.bodyText.y+this.bodyText.displayHeight-2*o,this.playButton.setScale(t),this.playButton.x=this.cameras.main.centerX,this.playButton.y=this.tetrisSymbol.y-this.tetrisSymbol.displayHeight}}])&&V(i.prototype,s),n&&V(i,n),a}(_);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(a,Phaser.GameObjects.Container);var e,i,s,n,o=(e=a,function(){var t,i=tt(e);if($()){var s=tt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return K(this,t)});function a(t,e,i,s,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,t))._texture=e,r._normalFrame=i,r._correctFrame=s,r._wrongFrame=n,r._isCorrect=!1,r.question=void 0,r.id=-1,r.column=0,r.row=0,r.isDropped=!1,r}return i=a,(s=[{key:"create",value:function(){this._animationSprite=this.scene.make.sprite(),this._animationSprite.x=0,this._animationSprite.visible=!1,this.add(this._animationSprite),this._background=this.scene.make.image(),this._background.setTexture(this._texture),this._background.setFrame(this._normalFrame),this.add(this._background),this._animationSprite.y=.85*-this._background.displayHeight,this._wrongFlash=this.scene.make.image(),this._wrongFlash.setTexture(this._texture),this._wrongFlash.setFrame(this._wrongFrame),this._wrongFlash.visible=!1,this.add(this._wrongFlash),this.setSize(this._background.displayWidth,this._background.displayHeight),this._nameText=this.scene.make.text(),this.add(this._nameText);var t=.95*this.width;this._nameText.setStyle({fontFamily:"AssistantBold",fontSize:"52px",fontStyle:"bold",fill:"#2E3192",align:"center",fixedWidth:2*t,fixedHeight:0,wordWrap:{width:2*t}}),this._nameText.setScale(.5),this._definitionText=this.scene.make.text(),this.add(this._definitionText),this._definitionText.setScale(.5)}},{key:"layout",value:function(){var t=.95*this.width;if(this._nameText.setText(this.question.term),this._nameText.x=-.5*this._nameText.displayWidth+2,this._definitionText.text&&this._definitionText.text.length>0){var e=this._isCorrect?"AssistantSemiBold":"AssistantBold";this._definitionText.setStyle({fontFamily:e,fontSize:"".concat(40,"px"),fill:"#2E3192",align:"center",fixedWidth:2*t,fixedHeight:0,wordWrap:{width:2*t}});var i=this._nameText.displayHeight+this._definitionText.displayHeight,s=.5*(this.height-i)-.5*this.height;this._nameText.y=s,this._definitionText.x=-.5*this._definitionText.displayWidth+2,this._definitionText.y=this._nameText.y+this._nameText.displayHeight}else this._nameText.y=.5*-this._nameText.displayHeight}},{key:"checkAnswer",value:function(t){return this._isCorrect=t===this.question.definition,this._isCorrect?this._background.setFrame(this._correctFrame):(this.showWrongFrame(),this.playAnimation("wrong")),this.scene.isMobile||this._definitionText.setText(this.question.definition),this.layout(),this._isCorrect}},{key:"playAnimation",value:function(t){var e=this;this._animationSprite.visible=!0,this._animationSprite.play(t),this._animationSprite.on("animationcomplete",(function(){e._animationSprite.visible=!1}))}},{key:"showWrongFlash",value:function(){this._wrongFlash.visible=!0,this._wrongFlash.alpha=0,this._wrongTween&&this._wrongTween.destroy(),this._wrongTween=this.scene.tweens.add({targets:this._wrongFlash,alpha:1,duration:250,yoyo:!0,repeat:-1})}},{key:"showWrongFrame",value:function(){this._wrongTween&&(this._wrongTween.remove(),this._wrongTween=null),this._wrongFlash.visible=!1,this._background.setFrame(this._wrongFrame)}}])&&J(i.prototype,s),n&&J(i,n),a}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(r,t);var e,i,n,o,a=(e=r,function(){var t,i=rt(e);if(at()){var s=rt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return ot(this,t)});function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=a.call(this,t))._scale=1,e._isUpdatingLayout=!1,e._cellWidth=134,e._cellHeight=67.5,e._maxColumn=5,e._maxRow=11,e._moveDownInterval=1e3,e._nextMoveTime=e.scene.time.now+e._moveDownInterval,e._currentBlock=null,e._numBlocksDropped=0,e._numCorrectAnswers=0,e._questions=void 0,e._grid=[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],e.category=void 0,e.bg=new s.GameObjects.Image(e.scene,0,0,"atlas","game stage.png"),e.add(e.bg),e.setSize(e.bg.width,e.bg.height),e.definitionContainer=e.scene.make.container(),e.add(e.definitionContainer),e.blockContainer=e.scene.make.container(),e.add(e.blockContainer),e.correctSound=e.scene.sound.add("correctBrick"),e.wrongSound=e.scene.sound.add("wrongBrick"),e}return i=r,(n=[{key:"createQuestions",value:function(){if(this.category){var t=this.category.questions;for(this._questions=[];this._questions.length<6;){var e=s.Utils.Array.GetRandom(t);this._questions.indexOf(e)<0&&this._questions.push(e)}}}},{key:"createBlocks",value:function(){var t=this;this._questions&&this._questions.forEach((function(e,i){var s=new et(t.scene,"atlas","in transit block.png","right block.png","wrong block.png");s.create(),s.question=e,s.id=i+1,s.column=i,s.row=0,t.blockContainer.add(s)}))}},{key:"createDefinitions",value:function(){var t=this;if(this._questions){var e=this._questions.map((function(t){return t}));s.Utils.Array.Shuffle(e);var i={fontFamily:"AssistantBold",fontSize:"40px",fontStyle:"bold",fill:"#2E3192",align:"center",fixedWidth:240,wordWrap:{width:240}};e.forEach((function(e){var s=t.scene.make.text();s.setStyle(i),s.setText(e.definition),t.definitionContainer.add(s)}))}}},{key:"createMask",value:function(){this.clearMask(!0);var t=this.scene.make.graphics();t.fillRect(this.x-.5*this.displayWidth,this.y-.5*this.displayHeight,this.displayWidth,this.displayHeight);var e=t.createGeometryMask();this.setMask(e)}},{key:"layoutBlocks",value:function(){var t=this,e=11.5*this._scale;this.blockContainer.getAll().forEach((function(i){i.setScale(t._scale),i.layout(),t.moveBlock(i),0===i.y&&(i.y-=e),i.isDropped&&(i.y+=t._cellHeight*t._scale)}))}},{key:"layoutDefinitions",value:function(){var t=this,e=100*this._scale;this.definitionContainer.getAll().forEach((function(i,s){i.setScale(.5*t._scale),i.x=s*t._cellWidth*t._scale-.5*i.displayWidth+2,i.y=t.displayHeight-.5*e-.5*i.displayHeight}))}},{key:"moveBlock",value:function(t){t.x=t.column*this._cellWidth*this._scale,t.y=t.row*this._cellHeight*this._scale}},{key:"moveBlockRight",value:function(){if(!R.isGamePaused&&this._currentBlock){var t=this._grid[this._currentBlock.row][this._currentBlock.column+1];if(void 0!==t&&t>0)return;this._currentBlock.column++,this._currentBlock.column>this._maxColumn?this._currentBlock.column=this._maxColumn:(this._nextMoveTime=this.scene.time.now+.5*this._moveDownInterval,this.moveBlock(this._currentBlock))}}},{key:"moveBlockLeft",value:function(){if(!R.isGamePaused&&this._currentBlock){var t=this._grid[this._currentBlock.row][this._currentBlock.column-1];if(void 0!==t&&t>0)return;this._currentBlock.column--,this._currentBlock.column<0?this._currentBlock.column=0:(this._nextMoveTime=this.scene.time.now+.5*this._moveDownInterval,this.moveBlock(this._currentBlock))}}},{key:"moveBlockDown",value:function(){R.isGamePaused||this._currentBlock&&(this._grid[this._maxRow][this._currentBlock.column]>0||(this._currentBlock.row=this._maxRow,this._nextMoveTime-=this._moveDownInterval))}},{key:"nextBlock",value:function(){var t=this.blockContainer.getAll();if(this._currentBlock&&(this._currentBlock.isDropped=!0,this._numBlocksDropped++,this._grid[this._currentBlock.row][this._currentBlock.column]=this._currentBlock.id,this._currentBlock=null,this._numBlocksDropped===t.length))this.scene.nextRound();else{var e=s.Math.Between(0,t.length-1),i=t[e];if(i){for(;i.isDropped;)i=t[e=s.Math.Between(0,t.length-1)];this._nextMoveTime=this.scene.time.now+.5*this._moveDownInterval,this._currentBlock=i}}}},{key:"checkAnswer",value:function(){var t=this,e=this.definitionContainer.getAt(this._currentBlock.column);if(this._currentBlock.checkAnswer(e.text)){var i;switch(this._numCorrectAnswers++,this._numCorrectAnswers){case 1:i="correctTurbine";break;case 2:i="correctFlag";break;case 3:i="correctLamp";break;case 4:i="correctStar";break;case 5:i="correctSmile";break;default:i="correctLike"}this._currentBlock.playAnimation(i),this.correctSound.play(),this.scene.addScore()}else{this.wrongSound.play();var s=this.definitionContainer.getAll().find((function(e){return t._currentBlock.question.definition===e.text})),n=this._currentBlock;this.scene.time.delayedCall(1e3,(function(){t._grid[n.row][n.column]=0,n.column=t.definitionContainer.getIndex(s),t._grid[n.row][n.column]=n.id,t.moveBlock(n),n.y+=t._cellHeight*t._scale}))}this.nextBlock()}},{key:"replayRound",value:function(){this._nextMoveTime=this.scene.time.now+this._moveDownInterval,this._currentBlock=null,this._numBlocksDropped=0,this._numCorrectAnswers=0,this._grid=[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],this.definitionContainer.getAll().forEach((function(t){return t.destroy()})),this.blockContainer.getAll().forEach((function(t){return t.destroy()})),this.createQuestions(),this.createDefinitions(),this.createBlocks()}},{key:"replayGame",value:function(){this.replayRound()}},{key:"nextRound",value:function(){this.replayRound()}},{key:"layout",value:function(t){if(this._isUpdatingLayout=!0,this.scene.isMobile)this._scale=this.scene.isDeviceLandscape?.95*this.scene.gameHeight/this.bg.height:.9*this.scene.gameWidth/this.bg.width,this.scene.isDeviceLandscape||this._scale>=.8&&(this._scale=.68),this.bg.displayWidth=this.bg.width*this._scale,this.bg.displayHeight=this.bg.height*this._scale,this.y=this.scene.cameras.main.centerY;else{this._scale=this.scene.gameHeight/t.height,this.bg.displayWidth=this.bg.width*this._scale,this.bg.displayHeight=this.bg.height*this._scale;var e=50*this._scale;this.y=this.scene.cameras.main.centerY+e}this.setSize(this.bg.displayWidth,this.bg.displayHeight);var i=88*this._scale,s=-22.5*this._scale;this.blockContainer.x=-.5*this.displayWidth+i,this.blockContainer.y=-.5*this.displayHeight+s,this.definitionContainer.x=-.5*this.displayWidth+i,this.definitionContainer.y=-.5*this.displayHeight+s,this.x=this.scene.cameras.main.centerX,this.createMask(),this.layoutBlocks(),this.layoutDefinitions(),this._isUpdatingLayout=!1}},{key:"update",value:function(){if(!R.isGamePaused&&!this._isUpdatingLayout&&this._currentBlock&&this.scene.time.now>=this._nextMoveTime&&(this._nextMoveTime=this.scene.time.now+this._moveDownInterval,this._currentBlock.row++,this._currentBlock.row>this._maxRow&&(this._currentBlock.row=this._maxRow),this.moveBlock(this._currentBlock),this._currentBlock.row===this._maxRow)){this._currentBlock.y+=this._cellHeight*this._scale;var t=this._currentBlock.column,e=this._currentBlock.row;if(this._grid[e][t]>0){for(;this._grid[e][t]>0;)if(++t>this._maxColumn){t=this._currentBlock.column;break}if(t===this._currentBlock.column)for(;this._grid[e][t]>0;)if(--t<0)return;this._currentBlock.column=t,this.moveBlock(this._currentBlock),this._currentBlock.y+=this._cellHeight*this._scale}this.checkAnswer()}}},{key:"unscaledWidth",get:function(){return this.bg.width}},{key:"unscaledHeight",get:function(){return this.bg.width}},{key:"scaleValue",get:function(){return this._scale}}])&&st(i.prototype,n),o&&st(i,o),r}(s.GameObjects.Container);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(a,Phaser.GameObjects.RenderTexture);var e,i,s,n,o=(e=a,function(){var t,i=pt(e);if(yt()){var s=pt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return ft(this,t)});function a(t,e){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32;return ct(this,a),(i=o.call(this,t,s,n,r,h))._texture=e.texture,i._frame=e.frame,i._sourceWidth=e.sourceWidth,i._sourceHeight=e.sourceHeight,i._top=e.top,i._right=e.right,i._bottom=e.bottom,i._left=e.left,i.setOrigin(.5),i._slice(),i.setSize9Slice(i.width,i.height),i}return i=a,(s=[{key:"_slice",value:function(){this._tl=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._left,this._top),this._tl.drawFrame(this._texture,this._frame),this._l=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._left,this._sourceHeight-this._top-this._bottom),this._l.drawFrame(this._texture,this._frame,0,-this._top),this._bl=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._left,this._sourceHeight-this._bottom),this._bl.drawFrame(this._texture,this._frame,0,-(this._l.height+this._top)),this._t=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._sourceWidth-this._left-this._right,this._top),this._t.drawFrame(this._texture,this._frame,-this._left,0),this._c=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._sourceWidth-this._left-this._right,this._sourceHeight-this._top-this._bottom),this._c.drawFrame(this._texture,this._frame,-this._left,-this._top),this._b=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._sourceWidth-this._left-this._right,this._bottom),this._b.drawFrame(this._texture,this._frame,-this._left,-(this._c.height+this._top)),this._tr=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._right,this._top),this._tr.drawFrame(this._texture,this._frame,-(this._sourceWidth-this._right),0),this._r=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._right,this._sourceHeight-this._top-this._bottom),this._r.drawFrame(this._texture,this._frame,-(this._sourceWidth-this._right),-this._top),this._br=new Phaser.GameObjects.RenderTexture(this.scene,0,0,this._right,this._bottom),this._br.drawFrame(this._texture,this._frame,-(this._sourceWidth-this._right),-(this._sourceHeight-this._bottom))}},{key:"setSize9Slice",value:function(t,e){this.setSize(t,e),this.clear(),this.draw(this._tl,0,0),this._l.setScale(1,(this.height-this._top-this._bottom)/this._l.height),this.draw(this._l,0,this._top),this._bl.setScale(1),this.draw(this._bl,0,this._l.displayHeight+this._top),this._t.setScale((this.width-this._left-this._right)/this._t.width,1),this.draw(this._t,this._left,0),this._c.setScale((this.width-this._left-this._right)/this._c.width,(this.height-this._top-this._bottom)/this._c.height),this.draw(this._c,this._left,this._top),this._b.setScale((this.width-this._left-this._right)/this._b.width,1),this.draw(this._b,this._left,this._c.displayHeight+this._top),this.draw(this._tr,this.width-this._right,0),this._r.setScale(1,(this.height-this._top-this._bottom)/this._r.height),this.draw(this._r,this.width-this._right,this._top),this.draw(this._br,this.width-this._right,this.height-this._bottom)}},{key:"sourceWidth",get:function(){return this._sourceWidth}},{key:"sourceHeight",get:function(){return this._sourceHeight}}])&&ut(i.prototype,s),n&&ut(i,n),a}();function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(a,t);var e,i,s,n,o=(e=a,function(){var t,i=wt(e);if(_t()){var s=wt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return St(this,t)});function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).bg=new gt(e.scene,{texture:"atlas",frame:"panel bg.png",sourceWidth:194,sourceHeight:869,top:20,right:20,bottom:20,left:20}),e.add(e.bg),e.setSize(e.bg.width,e.bg.height);var i={fontFamily:"AssistantBold",fontSize:"50px",fill:"#2E3192",align:"center",fixedWidth:330,wordWrap:{width:330}};return e.replayRoundBtn=new W(e.scene,"button bg.png","button bg-2.png","סיבוב חדש",i),e.add(e.replayRoundBtn),e.replayRoundBtn.on("pointerup",(function(){e.resumeGame(),e.scene.replayRound()})),e.replayGameBtn=new W(e.scene,"button bg.png","button bg-2.png","משחק חדש",i),e.add(e.replayGameBtn),e.replayGameBtn.on("pointerup",(function(){e.resumeGame(),e.scene.replayGame()})),e.endGameBtn=new W(e.scene,"button bg.png","button bg-2.png","סיום משחק",i),e.add(e.endGameBtn),e.endGameBtn.on("pointerup",(function(){e.resumeGame(),e.scene.endGame()})),e.toggleSoundBtn=e.scene.make.sprite({x:0,y:0,key:"atlasNew",frame:R.isMute?"sound off.png":"sound on.png"}),e.add(e.toggleSoundBtn),e.toggleSoundBtn.setInteractive(),e.toggleSoundBtn.on("pointerup",(function(){R.isGamePaused||(R.isMute=!R.isMute,e.scene.sound.setMute(R.isMute),e.toggleSoundBtn.setFrame(R.isMute?"sound off.png":"sound on.png"))})),e.pauseGameBtn=e.scene.make.sprite({x:0,y:0,key:"atlasNew",frame:"pause.png"}),e.add(e.pauseGameBtn),e.pauseGameBtn.setInteractive(),e.pauseGameBtn.on("pointerup",(function(){R.isGamePaused=!R.isGamePaused,e.pauseGameBtn.setFrame(R.isGamePaused?"play.png":"pause.png"),R.isGamePaused?(e.pauseGameBtn.setFrame("play.png"),e.scene.sound.setMute(!0)):(e.pauseGameBtn.setFrame("pause.png"),R.isMute||e.scene.sound.setMute(!1))})),e}return i=a,(s=[{key:"resumeGame",value:function(){R.isGamePaused=!1,this.pauseGameBtn.setFrame("pause.png"),R.isMute||this.scene.sound.setMute(!1)}},{key:"layout",value:function(t,e){if(t&&e)if(this.scene.isMobile)if(this.scene.isDeviceLandscape){var i=t.x-.5*t.displayWidth-e.x,s=.35*t.displayWidth;this.bg.setSize9Slice(s,t.displayHeight),this.setSize(this.bg.displayWidth,this.bg.displayHeight),this.layoutLandscape(this.bg.displayWidth/this.bg.sourceWidth*.9,e,i)}else{var n=this.scene.gameHeight-(t.y+.5*t.displayHeight),o=.4*t.displayHeight;this.bg.setSize9Slice(t.displayWidth,o),this.setSize(this.bg.displayWidth,this.bg.displayHeight),this.layoutPortrait(.9*this.scene.scaleRatio,t,n)}else{var a=this.scene.gameHeight/e.height;this.bg.setSize9Slice(this.bg.sourceWidth*a,this.bg.sourceHeight*a);var r=t.x-.5*t.displayWidth-e.x;this.setSize(this.bg.displayWidth,this.bg.displayHeight),this.layoutLandscape(a,e,r);var h=50*a;this.y=this.scene.cameras.main.centerY+h}}},{key:"layoutLandscape",value:function(t,e,i){this.x=e.x+.5*i,this.y=this.scene.cameras.main.centerY;var s=4*t;this.replayRoundBtn.setScale(t),this.replayRoundBtn.x=0,this.replayRoundBtn.y=-.5*this.height+.5*this.replayRoundBtn.displayHeight+3*s,this.replayGameBtn.setScale(t),this.replayGameBtn.x=0,this.replayGameBtn.y=this.replayRoundBtn.y+this.replayGameBtn.displayHeight+s,this.endGameBtn.setScale(t),this.endGameBtn.x=0,this.endGameBtn.y=this.replayGameBtn.y+this.endGameBtn.displayHeight+s,this.toggleSoundBtn.setScale(t),this.toggleSoundBtn.x=0,this.toggleSoundBtn.y=.5*this.displayHeight-.5*this.toggleSoundBtn.displayHeight-6*s,this.pauseGameBtn.setScale(t),this.pauseGameBtn.x=this.toggleSoundBtn.x,this.pauseGameBtn.y=this.toggleSoundBtn.y-this.pauseGameBtn.displayHeight-6*s}},{key:"layoutPortrait",value:function(t,e,i){this.x=e.x,this.y=.5*i,this.toggleSoundBtn.setScale(t);var s=(this.height-2*this.toggleSoundBtn.displayHeight)/3;this.toggleSoundBtn.x=this.bg.x-.5*this.bg.displayWidth+.5*this.toggleSoundBtn.displayWidth+s,this.toggleSoundBtn.y=this.bg.y+.5*this.bg.displayHeight-.5*this.toggleSoundBtn.displayHeight-s,this.pauseGameBtn.setScale(t),this.pauseGameBtn.x=this.toggleSoundBtn.x,this.pauseGameBtn.y=this.toggleSoundBtn.y-this.pauseGameBtn.displayHeight-s,this.replayRoundBtn.setScale(t),this.replayRoundBtn.x=.5*this.width-.5*this.replayRoundBtn.displayWidth-s,this.replayRoundBtn.y=this.pauseGameBtn.y,this.replayGameBtn.setScale(t),this.replayGameBtn.x=this.replayRoundBtn.x,this.replayGameBtn.y=this.replayRoundBtn.y+this.replayGameBtn.displayHeight+s,this.endGameBtn.setScale(t),this.endGameBtn.x=this.replayRoundBtn.x-this.endGameBtn.displayWidth-s,this.endGameBtn.y=this.replayRoundBtn.y}}])&&bt(i.prototype,s),n&&bt(i,n),a}(s.GameObjects.Container);function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e){return!e||"object"!==kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(r,t);var e,i,n,o,a=(e=r,function(){var t,i=Rt(e);if(Wt()){var s=Rt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return Lt(this,t)});function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=a.call(this,t)).bg=new gt(e.scene,{texture:"atlas",frame:"panel bg.png",sourceWidth:194,sourceHeight:869,top:20,right:20,bottom:20,left:20}),e.add(e.bg),e.setSize(e.bg.width,e.bg.height),e.dataBg=new s.GameObjects.Image(e.scene,0,0,"atlas","data bg.png"),e.add(e.dataBg),e.dataBgSingle=new gt(e.scene,{texture:"atlas",frame:"data_bg_single.png",sourceWidth:174,sourceHeight:110,top:20,right:20,bottom:20,left:20}),e.add(e.dataBgSingle),e.createTexts(),e.downArrowBtn=e.scene.make.sprite({key:"atlasNew",frame:"down button.png"}),e.downArrowBtn.setInteractive(),e.add(e.downArrowBtn),e.leftArrowBtn=e.scene.make.sprite({key:"atlasNew",frame:"left button.png"}),e.leftArrowBtn.setInteractive(),e.add(e.leftArrowBtn),e.rightArrowBtn=e.scene.make.sprite({key:"atlasNew",frame:"right button.png"}),e.rightArrowBtn.setInteractive(),e.add(e.rightArrowBtn),e}return i=r,(n=[{key:"createTexts",value:function(){var t={fontFamily:"Assistant",fontSize:"48px",fill:"#666666",rtl:!0},e={fontFamily:"AssistantBold",fontSize:"74px",fontStyle:"bold",fill:"#2E3192",rtl:!0};this.roundLabel=new s.GameObjects.Text(this.scene,0,0,"סיבוב ".concat(2," מתוך ",4),t),this.add(this.roundLabel),this.categoryNameLabel=new s.GameObjects.Text(this.scene,0,0,"אישים",e),this.add(this.categoryNameLabel),this.roundScoreLabel=new s.GameObjects.Text(this.scene,0,0,"ניקוד בסיבוב הזה",t),this.add(this.roundScoreLabel),this.roundScoreValue=new s.GameObjects.Text(this.scene,0,0,"0",e),this.add(this.roundScoreValue),this.totalScoreLabel=new s.GameObjects.Text(this.scene,0,0,"ניקוד מצטבר",t),this.add(this.totalScoreLabel),this.totalScoreValue=new s.GameObjects.Text(this.scene,0,0,"0",e),this.add(this.totalScoreValue)}},{key:"layout",value:function(t,e){if(t&&e)if(this.scene.isMobile)if(this.scene.isDeviceLandscape){var i=e.x+e.displayWidth-(t.x+.5*t.displayWidth),s=.35*t.displayWidth;this.bg.setSize9Slice(s,t.displayHeight),this.setSize(this.bg.displayWidth,this.bg.displayHeight);var n=this.bg.displayWidth/this.bg.sourceWidth*.9;n>.6&&(n=.6),this.layoutLandscape(n,t,i)}else{var o=t.y-.5*t.displayHeight,a=.4*t.displayHeight;this.bg.setSize9Slice(t.displayWidth,a),this.setSize(this.bg.displayWidth,this.bg.displayHeight),this.layoutPortrait(this.scene.scaleRatio,t,o)}else{var r=this.scene.gameHeight/e.height;this.bg.setSize9Slice(this.bg.sourceWidth*r,this.bg.sourceHeight*r);var h=e.x+e.displayWidth-(t.x+.5*t.displayWidth);this.setSize(this.bg.displayWidth,this.bg.displayHeight),this.layoutLandscape(r,t,h);var l=50*r;this.y=this.scene.cameras.main.centerY+l}}},{key:"layoutLandscape",value:function(t,e,i){this.x=e.x+.5*e.displayWidth+.5*i,this.y=this.scene.cameras.main.centerY;var s=16*t;this.dataBg.setScale(t),this.dataBg.x=0,this.dataBg.y=-.5*this.height+.5*this.dataBg.displayHeight+s,this.dataBg.visible=!0,this.dataBgSingle.visible=!1,this.dataBgSingle.setSize9Slice(this.dataBgSingle.sourceWidth,this.dataBgSingle.sourceHeight);var n=8*t,o=28*t,a=8*t;this.roundLabel.setScale(.5*t),this.roundLabel.x=.5*this.roundLabel.displayWidth,this.roundLabel.y=-.5*this.height+o+n,this.categoryNameLabel.setScale(.5*t),this.categoryNameLabel.x=.5*this.categoryNameLabel.displayWidth,this.categoryNameLabel.y=this.roundLabel.y+this.roundLabel.displayHeight+a,this.roundScoreLabel.setScale(.5*t),this.roundScoreLabel.x=.5*this.roundScoreLabel.displayWidth,this.roundScoreLabel.y=-.5*this.height+o+n+128*t,this.roundScoreValue.setScale(.5*t),this.roundScoreValue.x=.5*this.roundScoreValue.displayWidth,this.roundScoreValue.y=this.roundScoreLabel.y+this.roundScoreLabel.displayHeight+a,this.totalScoreLabel.setScale(.5*t),this.totalScoreLabel.x=.5*this.totalScoreLabel.displayWidth,this.totalScoreLabel.y=-.5*this.height+o+n+256*t,this.totalScoreValue.setScale(.5*t),this.totalScoreValue.x=.5*this.totalScoreValue.displayWidth,this.totalScoreValue.y=this.totalScoreLabel.y+this.totalScoreLabel.displayHeight+a,this.downArrowBtn.setScale(t*(this.scene.isMobile?1:.8)),this.downArrowBtn.x=0,this.downArrowBtn.y=.5*this.height-.5*this.downArrowBtn.displayHeight-2*a,this.leftArrowBtn.setScale(t*(this.scene.isMobile?1:.8)),this.leftArrowBtn.x=-.5*this.width+.5*this.leftArrowBtn.displayWidth+2*n,this.leftArrowBtn.y=this.downArrowBtn.y-this.downArrowBtn.displayHeight-2*a,this.rightArrowBtn.setScale(t*(this.scene.isMobile?1:.8)),this.rightArrowBtn.x=.5*this.width-.5*this.rightArrowBtn.displayWidth-2*n,this.rightArrowBtn.y=this.leftArrowBtn.y}},{key:"layoutPortrait",value:function(t,e,i){this.x=e.x,this.y=.5*(i-this.height)+e.y+.5*e.displayHeight+.5*this.height,this.dataBg.visible=!1,this.dataBgSingle.visible=!0,this.dataBgSingle.setSize9Slice(.55*this.width,.9*this.height);var s=this.height-this.dataBgSingle.displayHeight;this.dataBgSingle.x=.5*this.width-.5*this.dataBgSingle.displayWidth-.5*s,this.rightArrowBtn.setScale(t);var n=this.width-this.dataBgSingle.displayWidth-s,o=(n-2*this.rightArrowBtn.displayWidth)/3,a=12*t;this.downArrowBtn.setScale(t),this.downArrowBtn.x=this.bg.x-.5*this.bg.displayWidth+.5*n+6,this.downArrowBtn.y=this.bg.y+.5*this.bg.displayHeight-.5*this.downArrowBtn.displayHeight-a,this.rightArrowBtn.x=this.dataBgSingle.x-.5*this.dataBgSingle.displayWidth-.5*this.rightArrowBtn.displayWidth-o-2,this.rightArrowBtn.y=this.downArrowBtn.y-this.rightArrowBtn.displayHeight,this.leftArrowBtn.setScale(t),this.leftArrowBtn.x=this.rightArrowBtn.x-this.rightArrowBtn.displayWidth-o,this.leftArrowBtn.y=this.rightArrowBtn.y;var r=8*t,h=1.1*t*.5,l=.78*t*.5;this.roundLabel.setScale(h);var c=(this.height-s-3*this.roundLabel.displayHeight)/4;this.roundLabel.x=.5*this.width-s,this.roundLabel.y=-.5*this.height+c+.5*s,this.categoryNameLabel.setScale(l),this.categoryNameLabel.x=this.roundLabel.x-this.roundLabel.displayWidth-r,this.categoryNameLabel.y=this.roundLabel.y,this.roundScoreLabel.setScale(h),this.roundScoreLabel.x=this.roundLabel.x,this.roundScoreLabel.y=this.roundLabel.y+this.roundLabel.displayHeight+c,this.roundScoreValue.setScale(l),this.roundScoreValue.x=this.roundScoreLabel.x-this.roundScoreLabel.displayWidth-r,this.roundScoreValue.y=this.roundScoreLabel.y,this.totalScoreLabel.setScale(h),this.totalScoreLabel.x=this.roundLabel.x,this.totalScoreLabel.y=this.roundScoreLabel.y+this.roundScoreLabel.displayHeight+c,this.totalScoreValue.setScale(l),this.totalScoreValue.x=this.totalScoreLabel.x-this.totalScoreLabel.displayWidth-r,this.totalScoreValue.y=this.totalScoreLabel.y}},{key:"setRoundScore",value:function(t){this.roundScoreValue.setText(t)}},{key:"setTotalScore",value:function(t){this.totalScoreValue.setText(t)}},{key:"setRoundDetails",value:function(t,e,i){this.categoryNameLabel.setText(t),this.roundLabel.setText("סיבוב ".concat(e," מתוך ").concat(i))}}])&&Bt(i.prototype,n),o&&Bt(i,o),r}(s.GameObjects.Container);function Ht(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var jt=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this.gameStage=i;var s=this.gameStage.scaleValue;this.character=this.scene.add.sprite(0,0,"nextLevelAtlas","character"),this.character.setScale(.9*s,.75*s),this.character.x=i.x+120*s,this.character.y=i.y-50*s,this.character.visible=!1,this.bubble=this.scene.add.sprite(0,0,"nextLevelAtlas","bubble"),this.bubble.setOrigin(1,1),this.bubble.setScale(.9*s),this.bubble.x=i.x+40*s,this.bubble.y=i.y-60*s,this.bubble.visible=!1,this.texts=[],this.masks=[]}var e,i,s;return e=t,(i=[{key:"play",value:function(){var t=this,e=this.gameStage.scaleValue;this.character.visible=!0,this.character.setScale(.1),this.character.setAngle(-45),this.bubble.setScale(.1),this.bubble.visible=!1,this.scene.tweens.add({targets:this.character,scaleX:.9*e,scaleY:.75*e,angle:0,ease:"Power4",duration:250,onComplete:function(){t.bubble.visible=!0,t.scene.tweens.add({targets:t.bubble,scale:.9*e,ease:"Power4",duration:250,onComplete:function(){t.addTextAnimation(0,22,-200,170,42,800),t.addTextAnimation(800,22,-155,110,42,500),t.addTextAnimation(1300,-90,-155,110,42,400),t.addTextAnimation(1700,-205,-155,88,42,200),t.scene.time.delayedCall(2700,(function(){t.scene.tweens.add({targets:t.character,alpha:0,ease:"Power0",duration:150}),t.scene.tweens.add({targets:t.bubble,alpha:0,ease:"Power0",duration:150,onComplete:function(){return t.cleanUp()}}),t.texts.forEach((function(e){t.scene.tweens.add({targets:e,alpha:0,ease:"Power0",duration:150})}))}))}})}})}},{key:"addTextAnimation",value:function(t,e,i,s,n,o){var a=this,r=this.gameStage.scaleValue,h=this.scene.make.graphics();h.fillStyle(16711680),h.fillRect(-s*r,0,s*r,n*r),h.x=this.gameStage.x+e*r,h.y=this.gameStage.y+i*r,h.setScale(0,1),h.fillWidth=s,h.fillheight=n,h.xPos=e,h.yPos=i,this.masks.push(h);var l=new Phaser.Display.Masks.GeometryMask(this.scene,h),c=this.scene.add.sprite(0,0,"nextLevelAtlas","text");c.setScale(.9*r),c.x=this.bubble.x-.5*this.bubble.displayWidth,c.y=this.bubble.y-c.displayHeight-18*r,c.visible=!1,c.setMask(l),this.texts.push(c),this.scene.time.delayedCall(t,(function(){c.visible=!0,a.scene.tweens.add({targets:h,scaleX:1,ease:"Power4",duration:o})}))}},{key:"layout",value:function(){var t=this,e=this.gameStage.scaleValue;this.character.setScale(.9*e,.75*e),this.character.x=this.gameStage.x+120*e,this.character.y=this.gameStage.y-50*e,this.bubble.setScale(.9*e),this.bubble.x=this.gameStage.x+40*e,this.bubble.y=this.gameStage.y-60*e,this.masks.forEach((function(i){i.x=t.gameStage.x+i.xPos*e,i.y=t.gameStage.y+i.yPos*e})),this.texts.forEach((function(i,s){i.setScale(.9*e),i.x=t.bubble.x-.5*t.bubble.displayWidth,i.y=t.bubble.y-i.displayHeight-18*e;var n=t.masks[s],o=new Phaser.Display.Masks.GeometryMask(t.scene,n);i.setMask(o)}))}},{key:"hide",value:function(){this.character.visible=!1,this.bubble.visible=!1,this.texts.forEach((function(t){return t.visible=!1}))}},{key:"cleanUp",value:function(){this.character.destroy(),this.bubble.destroy(),this.masks.forEach((function(t){return t.destroy()})),this.texts.forEach((function(t){return t.destroy()})),this.masks=null,this.texts=null}}])&&Ht(e.prototype,i),s&&Ht(e,s),t}();function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Gt(t,e,i){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zt(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(a,t);var e,i,s,n,o=(e=a,function(){var t,i=zt(e);if(Mt()){var s=zt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return Ft(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,"GameScene")}return i=a,(s=[{key:"create",value:function(){var t=this;Gt(zt(a.prototype),"create",this).call(this),R.isGameFinished=!1,this.background=this.add.image(0,0,"atlas","bg.png"),this.platform=this.add.image(0,0,"atlas","platform.png"),this.platform.setOrigin(0,0),this.gameLogo=this.add.image(0,0,"atlas","game logo.png"),this.hebrewText=this.add.image(0,0,"atlas","hebrew_text.png"),this.kklLogo=this.add.image(0,0,"atlas","kkl logo.png"),this.gameStage=new ht(this),this.add.existing(this.gameStage),this.leftPanel=new vt(this),this.add.existing(this.leftPanel),this.rightPanel=new Ot(this),this.add.existing(this.rightPanel),this.rightPanel.leftArrowBtn.on("pointerup",(function(){return t.gameStage.moveBlockLeft()})),this.rightPanel.rightArrowBtn.on("pointerup",(function(){return t.gameStage.moveBlockRight()})),this.rightPanel.downArrowBtn.on("pointerup",(function(){return t.gameStage.moveBlockDown()})),this.input.keyboard.on("keyup_LEFT",(function(){return t.gameStage.moveBlockLeft()})),this.input.keyboard.on("keyup_RIGHT",(function(){return t.gameStage.moveBlockRight()})),this.input.keyboard.on("keyup_DOWN",(function(){return t.gameStage.moveBlockDown()}));var e=this.cache.json.get("questionsData");this.gameStage.category=e.categories[R.round],this.gameStage.createQuestions(),this.gameStage.createDefinitions(),this.gameStage.createBlocks(),this.rightPanel.setRoundDetails(this.gameStage.category.name,R.round+1,e.categories.length),this.createAnimations(),this.layout(),setTimeout((function(){t.gameStage.nextBlock()}),500)}},{key:"layout",value:function(){Gt(zt(a.prototype),"layout",this).call(this),this.background.setScale(this.scaleRatio),this.background.x=this.cameras.main.centerX;var t=.5*(this.game.scale.gameSize.height-this.background.displayHeight);this.background.y=this.cameras.main.centerY+Math.abs(t);var e=1;this.isMobile?(this.platform.displayWidth=.95*this.gameWidth,this.platform.displayHeight=1.15*this.gameHeight,this.platform.y=this.gameHeight-this.platform.displayHeight):(e=this.gameHeight/this.platform.height,this.platform.displayHeight=this.platform.height*e,this.platform.displayWidth=this.platform.width*e,this.platform.y=0),this.platform.x=.5*(this.gameWidth-this.platform.displayWidth),this.gameLogo.setScale(.75*e),this.gameLogo.x=this.cameras.main.centerX+.5*this.gameLogo.displayWidth+20*e,this.gameLogo.y=this.platform.y+55*e,this.gameLogo.visible=!this.isMobile,this.hebrewText.setScale(.75*e),this.hebrewText.x=this.cameras.main.centerX-.5*this.hebrewText.displayWidth-20*e,this.hebrewText.y=this.platform.y+55*e,this.hebrewText.visible=!this.isMobile,this.kklLogo.setScale(.75*e),this.kklLogo.x=this.platform.x+this.platform.displayWidth-1.75*this.kklLogo.displayWidth,this.kklLogo.y=this.platform.y+55*e,this.kklLogo.visible=!this.isMobile,this.gameStage.layout(this.platform),this.leftPanel.layout(this.gameStage,this.platform),this.rightPanel.layout(this.gameStage,this.platform),this.nextLevelAnimation&&this.nextLevelAnimation.layout(),this.finishAnimation&&(this.finishAnimation.x=this.gameStage.x,this.finishAnimation.y=this.gameStage.y-40*this.gameStage.scaleValue,this.finishAnimation.setScale(3*this.gameStage.scaleValue))}},{key:"update",value:function(){this.gameStage.update()}},{key:"createAnimations",value:function(){this.anims.create({key:"correctFlag",frames:this.anims.generateFrameNames("correctFlagAtlas",{prefix:"correct_flag_",end:32,zeroPad:5})}),this.anims.create({key:"correctLamp",frames:this.anims.generateFrameNames("correctLampAtlas",{prefix:"correct_lamp_",end:24,zeroPad:5})}),this.anims.create({key:"correctLike",frames:this.anims.generateFrameNames("correctLikeAtlas",{prefix:"correct_like_",end:24,zeroPad:5})}),this.anims.create({key:"correctSmile",frames:this.anims.generateFrameNames("correctSmileAtlas",{prefix:"correct_smile_",end:23,zeroPad:5})}),this.anims.create({key:"correctStar",frames:this.anims.generateFrameNames("correctStarAtlas",{prefix:"correct_star_",end:23,zeroPad:5})}),this.anims.create({key:"correctTurbine",frames:this.anims.generateFrameNames("correctTurbineAtlas",{prefix:"correct_turbine_",end:24,zeroPad:5})}),this.anims.create({key:"finish",frames:this.anims.generateFrameNames("finishAtlas",{prefix:"finish_",end:124,zeroPad:5})}),this.anims.create({key:"wrong",frames:this.anims.generateFrameNames("wrongAtlas",{prefix:"wrong_",end:19,zeroPad:5})})}},{key:"addScore",value:function(){R.roundScore++,R.totalScore++,this.rightPanel.setRoundScore(R.roundScore),this.rightPanel.setTotalScore(R.totalScore)}},{key:"replayRound",value:function(){this.nextLevelAnimation&&this.nextLevelAnimation.hide(),R.roundScore=0,this.rightPanel.setRoundScore(R.roundScore),this.rightPanel.setTotalScore(R.totalScore),this.gameStage.replayRound(),this.gameStage.layout(this.platform),this.gameStage.nextBlock()}},{key:"replayGame",value:function(){this.nextLevelAnimation&&this.nextLevelAnimation.hide(),R.totalScore=0,R.roundScore=0,R.round=0;var t=this.cache.json.get("questionsData").categories;this.gameStage.category=t[R.round],this.rightPanel.setRoundDetails(this.gameStage.category.name,R.round+1,t.length),this.rightPanel.layout(this.gameStage,this.platform),this.rightPanel.setRoundScore(R.roundScore),this.rightPanel.setTotalScore(R.totalScore),this.gameStage.replayGame(),this.gameStage.layout(this.platform),this.gameStage.nextBlock()}},{key:"nextRound",value:function(){var t=this;R.round++;var e=this.cache.json.get("questionsData").categories;R.roundScore=0,R.round>=e.length?(this.finishAnimation=this.add.sprite(0,0),this.finishAnimation.x=this.gameStage.x,this.finishAnimation.y=this.gameStage.y-40*this.gameStage.scaleValue,this.finishAnimation.setScale(3*this.gameStage.scaleValue),this.finishAnimation.play("finish"),this.finishAnimation.on("animationcomplete",(function(){t.finishAnimation.destroy(),t.finishAnimation=null,R.isGameFinished=!0,t.endGame()}))):(this.nextLevelAnimation=new jt(this,this.gameStage),this.time.delayedCall(1e3,(function(){return t.nextLevelAnimation.play()})),this.time.delayedCall(3850,(function(){t.nextLevelAnimation=null,t.gameStage.category=e[R.round],t.rightPanel.setRoundDetails(t.gameStage.category.name,R.round+1,e.length),t.rightPanel.layout(t.gameStage,t.platform),t.rightPanel.setRoundScore(R.roundScore),t.rightPanel.setTotalScore(R.totalScore),t.gameStage.nextRound(),t.gameStage.layout(t.platform),t.gameStage.nextBlock()})))}},{key:"endGame",value:function(){this.cleanUp(),this.scene.stop(),this.scene.start("EndScene")}}])&&At(i.prototype,s),n&&At(i,n),a}(_);function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Ut(t,e,i){return(Ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xt(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t,e){return!e||"object"!==Et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(a,t);var e,i,s,n,o=(e=a,function(){var t,i=Xt(e);if(It()){var s=Xt(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return qt(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,"EndScene")}return i=a,(s=[{key:"create",value:function(){var t=this;Ut(Xt(a.prototype),"create",this).call(this),this.background=this.add.image(0,0,"atlas","bg.png"),this.platform=this.add.image(0,0,"atlas","platform_opening.png"),this.platform.setOrigin(0,0),this.add.existing(this.platform),this.gameLogo=this.add.image(0,0,"atlas","game logo.png"),this.hebrewText=this.add.image(0,0,"atlas","hebrew_text.png"),this.kklLogo=this.add.image(0,0,"atlas","kkl logo.png"),this.tetrisSymbol=this.add.image(0,0,"atlas","tetris symbol.png"),this.titleText=this.add.text(),this.titleText.setScale(.5),this.bodyText=this.add.text(),this.bodyText.setScale(.5),this.bodyText.lineSpacing=16,this.joinUsButton=new W(this,"Vector Smart Object.png","Vector Smart Object.png","הירשמו לדיוור",{fontFamily:"AssistantSemiBold",fontSize:"45px",fill:"#ffffff",align:"center",fixedWidth:280,wordWrap:{width:280}}),this.joinUsButton.label.y=.38*-this.joinUsButton.displayHeight,this.add.existing(this.joinUsButton),this.joinUsButton.on("pointerup",(function(){window.open(y)})),this.greenwinLinkButton=new W(this,"Vector Smart Object.png","Vector Smart Object.png","לאתר חלון ירוק לצעירים",{fontFamily:"AssistantSemiBold",fontSize:"42px",fill:"#ffffff",align:"center",fixedWidth:280,wordWrap:{width:280}}),this.greenwinLinkButton.label.y=.48*-this.greenwinLinkButton.displayHeight,this.add.existing(this.greenwinLinkButton),this.greenwinLinkButton.on("pointerup",(function(){window.open(f)})),this.replayButton=new W(this,"Vector Smart Object.png","Vector Smart Object.png","שחקו שוב",{fontFamily:"AssistantSemiBold",fontSize:"45px",fill:"#ffffff",align:"center",fixedWidth:280,wordWrap:{width:280}}),this.replayButton.label.y=.38*-this.replayButton.displayHeight,this.add.existing(this.replayButton),this.replayButton.on("pointerup",(function(){console.log("replay game"),t.cleanUp(),t.scene.stop(),t.scene.start("GameScene")})),this.layout()}},{key:"layout",value:function(){Ut(Xt(a.prototype),"layout",this).call(this),this.background.setScale(this.scaleRatio),this.background.x=this.cameras.main.centerX;var t=.5*(this.game.scale.gameSize.height-this.background.displayHeight);this.background.y=this.cameras.main.centerY+Math.abs(t),this.isMobile?this.isDeviceLandscape?this.layoutMobileLandscape():this.layoutMobilePortrait():this.layoutDestop()}},{key:"layoutDestop",value:function(){this.platform.displayHeight=this.platform.height*this.scaleRatio,this.platform.displayWidth=this.platform.width*this.scaleRatio,this.platform.y=0,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth);var t=180*this.scaleRatio,e=40*this.scaleRatio,i=25*this.scaleRatio;this.gameLogo.setScale(this.scaleRatio),this.gameLogo.x=this.cameras.main.centerX+.45*this.gameLogo.displayWidth,this.gameLogo.y=this.platform.y+.5*t,this.hebrewText.setScale(this.scaleRatio),this.hebrewText.x=this.cameras.main.centerX-.65*this.hebrewText.displayWidth,this.hebrewText.y=this.gameLogo.y,this.kklLogo.setScale(this.scaleRatio),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-e,this.kklLogo.y=this.platform.y+.5*t,this.tetrisSymbol.setScale(this.scaleRatio),this.tetrisSymbol.x=this.platform.x+.5*this.tetrisSymbol.displayWidth+e,this.tetrisSymbol.y=this.platform.y+this.platform.displayHeight-.5*this.tetrisSymbol.displayHeight-i;var s=this.platform.displayWidth-2*e,n=12*this.scaleRatio,o=R.isGameFinished?O:P;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(68*this.scaleRatio),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*s,fixedHeight:0,wordWrap:{width:2*s}}),this.titleText.initRTL(),this.titleText.setText(o),this.titleText.x=this.platform.x+this.platform.displayWidth-e,this.titleText.y=this.platform.y+t+i;var a=R.isGameFinished?H+"\n"+j:A+"\n"+G;this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(56*this.scaleRatio),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*s,fixedHeight:0,wordWrap:{width:2*s}}),this.bodyText.initRTL(),this.bodyText.setText(a),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+n,this.joinUsButton.setScale(this.scaleRatio),this.joinUsButton.x=this.cameras.main.centerX,this.joinUsButton.y=this.platform.displayHeight+this.platform.y-1.5*this.joinUsButton.height,this.replayButton.setScale(this.scaleRatio),this.replayButton.x=this.platform.x+this.platform.displayWidth-.5*this.replayButton.width-e,this.replayButton.y=this.joinUsButton.y,this.greenwinLinkButton.setScale(this.scaleRatio),this.greenwinLinkButton.x=.5*(this.replayButton.x-this.joinUsButton.x)+this.joinUsButton.x,this.greenwinLinkButton.y=this.replayButton.y}},{key:"layoutMobileLandscape",value:function(){var t=this.gameHeight/this.platform.height;this.platform.displayWidth=this.platform.width*t,this.platform.displayHeight=this.platform.height*t*1.25,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth),this.platform.y=.4*(this.gameHeight-this.platform.displayHeight);var e=180*t*1.25+this.platform.y,i=40*t,s=25*t;this.gameLogo.setScale(t),this.gameLogo.x=this.cameras.main.centerX+.45*this.gameLogo.displayWidth,this.gameLogo.y=.5*e,this.hebrewText.setScale(t),this.hebrewText.x=this.cameras.main.centerX-.65*this.hebrewText.displayWidth,this.hebrewText.y=this.gameLogo.y,this.kklLogo.setScale(.8*t),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-i,this.kklLogo.y=.5*e,this.tetrisSymbol.setScale(.8*t),this.tetrisSymbol.x=this.platform.x+.5*this.tetrisSymbol.displayWidth+i,this.tetrisSymbol.y=this.gameHeight-.5*this.tetrisSymbol.displayHeight-s;var n=this.platform.displayWidth-2*i,o=12*t,a=R.isGameFinished?O:P;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(68*t),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.titleText.initRTL(),this.titleText.setText(a),this.titleText.x=this.platform.x+this.platform.displayWidth-i,this.titleText.y=e+s;var r=R.isGameFinished?H+"\n"+j:A+"\n"+G;this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(56*t),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bodyText.initRTL(),this.bodyText.setText(r),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+o;var h=1.25*t;this.joinUsButton.setScale(h),this.joinUsButton.x=this.tetrisSymbol.x+1.1*this.tetrisSymbol.displayWidth,this.joinUsButton.y=this.gameHeight-.9*this.joinUsButton.height,this.replayButton.setScale(h),this.replayButton.x=this.platform.x+this.platform.displayWidth-.5*this.replayButton.width-i,this.replayButton.y=this.joinUsButton.y,this.greenwinLinkButton.setScale(h),this.greenwinLinkButton.x=.5*(this.replayButton.x-this.joinUsButton.x)+this.joinUsButton.x,this.greenwinLinkButton.y=this.replayButton.y}},{key:"layoutMobilePortrait",value:function(){var t=this.scaleRatio;this.platform.displayWidth=.9*this.gameWidth,this.platform.displayHeight=1.25*this.gameHeight,this.platform.x=.5*(this.gameWidth-this.platform.displayWidth),this.platform.y=.75*(this.gameHeight-this.platform.displayHeight);var e=180*t*.75,i=18*t,s=18*t;this.hebrewText.setScale(.6*t),this.hebrewText.x=this.platform.x+.5*this.hebrewText.displayWidth+i,this.hebrewText.y=.5*e,this.kklLogo.setScale(.7*t),this.kklLogo.x=this.platform.x+this.platform.displayWidth-.5*this.kklLogo.displayWidth-i,this.kklLogo.y=.5*e,this.gameLogo.setScale(.6*t),this.gameLogo.x=.5*(this.kklLogo.x-this.hebrewText.x)+this.hebrewText.x+i,this.gameLogo.y=.5*e,this.tetrisSymbol.setScale(.8*t),this.tetrisSymbol.x=this.cameras.main.centerX,this.tetrisSymbol.y=this.gameHeight-.5*this.tetrisSymbol.displayHeight-s;var n=this.platform.displayWidth-2*i,o=12*t,a=R.isGameFinished?O:P;this.titleText.setStyle({fontFamily:"AssistantBold",fontSize:"".concat(Math.round(72*t),"px"),fontStyle:"bold",fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.titleText.initRTL(),this.titleText.setText(a),this.titleText.x=this.platform.x+this.platform.displayWidth-i,this.titleText.y=e+1.5*s;var r=R.isGameFinished?H+"\n"+j:A+"\n"+G;this.bodyText.setStyle({fontFamily:"Assistant",fontSize:"".concat(Math.round(56*t),"px"),fill:"#4D4749",rtl:!0,fixedWidth:2*n,fixedHeight:0,wordWrap:{width:2*n}}),this.bodyText.initRTL(),this.bodyText.setText(r),this.bodyText.x=this.titleText.x,this.bodyText.y=this.titleText.y+this.titleText.displayHeight+o;var h=1.1*t;this.greenwinLinkButton.setScale(h),this.greenwinLinkButton.x=this.cameras.main.centerX,this.greenwinLinkButton.y=this.bodyText.y+this.bodyText.displayHeight+2*this.greenwinLinkButton.displayHeight+s,this.joinUsButton.setScale(h),this.joinUsButton.x=this.greenwinLinkButton.x-this.joinUsButton.displayWidth,this.joinUsButton.y=this.greenwinLinkButton.y-this.joinUsButton.displayHeight,this.replayButton.setScale(h),this.replayButton.x=this.greenwinLinkButton.x+this.replayButton.displayWidth,this.replayButton.y=this.joinUsButton.y}}])&&Vt(i.prototype,s),n&&Vt(i,n),a}(_),Qt={type:s.CANVAS,width:u,height:d,parent:"game",scale:{mode:s.Scale.RESIZE,autoCenter:s.Scale.CENTER_BOTH},scene:[c,Y,Ct,Yt],render:{antialias:!0}};window.addEventListener("load",(function(){return new s.Game(Qt)}))}});
//# sourceMappingURL=app.bundle.js.map